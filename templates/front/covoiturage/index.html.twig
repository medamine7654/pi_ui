{% extends 'front/base.html.twig' %}

{% block title %}Covoiturages - RentAll{% endblock %}

{% block body %}
<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-6">Covoiturages</h1>

    {% for message in app.flashes('success') %}
        <div class="mb-4 rounded-md border border-green-200 bg-green-50 px-4 py-3 text-sm text-green-700">{{ message }}</div>
    {% endfor %}
    {% for message in app.flashes('error') %}
        <div class="mb-4 rounded-md border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700">{{ message }}</div>
    {% endfor %}

    <section class="mb-8 rounded-lg border border-gray-200 bg-white p-6 shadow-sm">
        <h2 class="mb-4 text-lg font-semibold text-gray-900">Ajouter un covoiturage</h2>
        <form method="post" action="{{ path('app_covoiturage_create') }}" class="grid grid-cols-1 gap-4 md:grid-cols-2">
            <input type="hidden" name="_token" value="{{ csrf_token('create_covoiturage') }}">
            <div>
                <label for="depart" class="mb-1 block text-sm font-medium text-gray-700">Depart</label>
                <input id="depart" name="depart" required maxlength="255" class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm" />
            </div>
            <div>
                <label for="destination" class="mb-1 block text-sm font-medium text-gray-700">Destination</label>
                <input id="destination" name="destination" required maxlength="255" class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm" />
            </div>
            <div>
                <label for="date_depart" class="mb-1 block text-sm font-medium text-gray-700">Date de depart</label>
                <input id="date_depart" name="date_depart" type="datetime-local" required class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm" />
            </div>
            <div>
                <label for="places" class="mb-1 block text-sm font-medium text-gray-700">Places</label>
                <input id="places" name="places" type="number" min="1" max="8" required class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm" />
            </div>
            <div class="md:col-span-2">
                <button class="rounded-md bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700">Ajouter</button>
            </div>
        </form>
    </section>

    {% if covoiturages|length > 0 %}
        <div class="space-y-3">
            {% for covoiturage in covoiturages %}
                <div class="rounded-lg border border-gray-200 bg-white p-4 shadow-sm">
                    <p class="text-sm font-medium text-gray-900">{{ covoiturage.depart }} -> {{ covoiturage.destination }}</p>
                    <p class="text-sm text-gray-500">Depart: {{ covoiturage.dateDepart ? covoiturage.dateDepart|date('d/m/Y H:i') : '-' }}</p>
                    <p class="text-sm text-gray-500">Places: {{ covoiturage.places }}</p>
                    <p class="text-xs text-gray-500">Conducteur: {{ covoiturage.conducteur ? covoiturage.conducteur.email : '-' }}</p>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="rounded-lg border border-gray-200 bg-white p-6 text-center text-gray-600">
            Aucun covoiturage disponible.
        </div>
    {% endif %}
</div>
{% endblock %}
