{# Tool Card Component #}
{% import 'front/components/ui_macros.html.twig' as ui %}

{% macro render(tool, host = null) %}
    <a href="{{ path('app_tool_show', {id: tool.id}) }}" class="block group">
        <div class="overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm transition-transform hover:scale-[1.02]">
            {# Tool image #}
            <div class="relative aspect-square overflow-hidden">
                <img 
                    src="{{ tool.images[0] ?? asset('placeholder.svg') }}" 
                    alt="{{ tool.name }}"
                    class="w-full h-full object-cover transition-transform group-hover:scale-105"
                >
                
                {# Availability badge #}
                <div class="absolute left-2 top-2">
                    {% if tool.available %}
                        {{ ui.badge('Available', 'success') }}
                    {% else %}
                        {{ ui.badge('Unavailable', 'default') }}
                    {% endif %}
                </div>

                {# Category badge #}
                <div class="absolute right-2 top-2">
                    {{ ui.badge(tool.category|replace({'-': ' '})|title, 'secondary') }}
                </div>
            </div>

            {# Card content #}
            <div class="p-4 space-y-2">
                <div class="flex items-start justify-between gap-2">
                    <h3 class="font-semibold text-gray-900 line-clamp-1">
                        {{ tool.name }}
                    </h3>
                    <div class="flex items-center gap-1 shrink-0">
                        {{ ui.starRating(tool.rating|default(0)) }}
                    </div>
                </div>
                
                <p class="text-sm text-gray-600 line-clamp-2">
                    {{ tool.description|default('') }}
                </p>
                
                <p class="text-sm text-gray-500">
                    Hosted by {{ host ? host.name : 'Unknown' }}
                </p>
                
                <div class="pt-2 flex items-center justify-between">
                    <p>
                        <span class="font-semibold text-gray-900">${{ tool.pricePerDay|default(0) }}</span>
                        <span class="text-gray-500 text-sm"> /day</span>
                    </p>
                    <span class="text-xs text-gray-500">{{ tool.reviewCount|default(0) }} reviews</span>
                </div>
            </div>
        </div>
    </a>
{% endmacro %}

{# Tool Card Skeleton #}
{% macro skeleton() %}
    {{ ui.skeleton('card') }}
{% endmacro %}

